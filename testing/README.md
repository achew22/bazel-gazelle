# Testing

One of the wonderful things about writing a code generator is that you can
produce incredibly robust test suites with relative ease. This package is
used to provide golden testing for supported languages.

If there is an edge case you would like to test in Gazelle, or a new language
you would like to implement, you should create a new directory in here and add
a build rule for it in the parent directory. Inside that directory you should
have a testing subset of a tree that expresses the functionality you will be
testing. In every file that you expect a `BUILD` file to be generated, you
should create a `BUILD.in` file. This file is the golden snapshot of what you
expect should be generated by Gazelle.

Note: that it is not a `BUILD` or a `BUILD.bazel` file. If you were to name the
file in either of those schemes, you would prevent the files that exist in that
teesting directory from ever being globbed. As a result, the `BUILD` file that
you were testing would also have to be a quine with a filegroup that included
all of the BUILD files necessary to demonstrate the test case. In order to
simplify this complexity, name your `BUILD` file `BUILD.in`.

# Updating

Since having golden tests can be very annoying, a utility `update.sh` has been
provided that will run the test like normal, but copy the newly generated
`BUILD` files into the appropriate testing directory.
